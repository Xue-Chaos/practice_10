**任务二（总分：47分）**

**任务描述：请基于ZigBee模块（黑板）进行基础开发，根据按键、光敏传感器的数据控制LED灯的亮灭，并周期通过串口输出光敏传感器的数据。**

**设备列表：**

1.  ZigBee模块（**黑板**）1个
2.  温湿度光敏传感器1个（或光敏二极管传感器）
3.  USB转串口线1根
4.  CC Debugger仿真器1个

**任务要求：**

在 “C:\\JoyWork\\01\\work\\Task\\”文件夹下创建IAR工程，工程名字和工作空间的名字均为：“Task+准考证号后12位”，把“Task” 文件夹下的“test.c”**添加到IAR工程中**，配置好工程选项参数，确保工程编译成功。（4分）。在“test.c”中添加代码实现以下功能（注意：题目中涉及到的变量均已在test.c中做了定义）：

1.  ZigBee模块一上电，所有灯不亮。（5分）
2.  每次按下SW1按键，D3、D4、D5 三个灯依次亮灭。（5分）
3.  按键采用中断的方式进行检测，上拉输入模式，下降沿触发中断。（6分）
4.  使用定时器1来产生0.01s的定时。定时器1参数配置采用模模式、32分频，定时器中断处理函数实现1s标志位的置1。（10分）
5.  串口通信要求采用波特率115200，8位数据位，1位停止位，无校验位，无流控。（2分）
6.  系统每1s采集光敏传感器数据并发送到串口，串口助手可以显示 “光照强度： XXX Lux”的信息，其中XXX要替换成真实测出来的光敏传感器数据。用手捂住或放开光敏传感器，把此时串口助手输出的信息截图保存至“图集.docx”中的9.png处（需要有捂住或放开时的不同光数据值出现）。（10分）
7.  自行设置阈值，实现捂住光敏传感器D6亮，放开D6灭。（5分）
8.  编码结束，将程序下载到ZigBee模块中，并验证结果是否正确。

9、**考试时间截止后，确保“图集.docx”和源码工程文件已保存后， 对work文件夹进行压缩，点击“上传文件”将压缩后的“work.zip”上传至服务器指定目录。**
